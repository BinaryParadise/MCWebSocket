<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=1" /> 
	<meta charset="UTF-8">
	<title>WebSocket客户端调试</title>
	<script type="text/javascript">
		var client;
		function startWS(url) {
			client = new WebSocket(url);
			client.onopen = function() {
				console.log("opened");
				var msg = "-----begin";
				for (var i = 0; i < 300 - 18; i++) {
					msg += 'a';
				}
				msg += "-----end";
				console.log("length: "+msg.length);
				client.send(msg);
			};

			client.onerror = function(event) {
				console.error(event);
			};

			client.onclose = function(event) {
				console.log("close");
			};

			client.onmessage = function(event) {
				console.log(event);
			};
		}

		function sendMessage() {
			if (client != undefined) {
				client.send("send message from webbrowser.");
			}
		}
	</script>
</head>
<body>
<button onclick="startWS('ws://192.168.15.80:21688/livelog')">调试WebSocket</button>
<button onclick="startWS('ws://192.168.15.80:1688/chat')">调试WebSocket(OC)</button>
<br />
<button onclick="sendMessage()">发送消息</button>
</body>
</html>
